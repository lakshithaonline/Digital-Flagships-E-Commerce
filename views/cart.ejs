<div class="cart-container">
    <h2>Your Cart</h2>
    <ul id="cart-items"></ul>
    <p id="cart-total">Total: $0</p>
    <button id="checkout-button">Proceed to Checkout</button>
    <button id="clear-cart-button">Clear Cart</button>

</div>

<script>

$(document).ready(function() {
            
            const cart = []; 

            $(".add-to-cart-btn").click(function() {
            const productName = $(this).data("product-name");
            const productPrice = parseFloat($(this).data("product-price"));

            // Check if the product is already in the cart
            const existingProduct = cart.find(item => item.name === productName);

            if (existingProduct) {
                existingProduct.quantity += 1; // Increase the quantity if the product is already in the cart
            } else {
                cart.push({ name: productName, price: productPrice, quantity: 1 }); // Add the product to the cart with quantity 1
            }

            // Update cart UI
            updateCartUI();
        });

        function updateCartUI() {
            const cartItemsList = $("#cart-items");
            const cartTotal = $("#cart-total");

            cartItemsList.empty();
            let total = 0;

            cart.forEach(item => {
                cartItemsList.append(`<li>${item.name} - $${item.price.toFixed(2)}</li>`);
                total += item.price;
            });

            cartTotal.text(`Total: $${total.toFixed(2)}`);
        }

        // Proceed to Checkout
        $("#checkout-button").click(function() {
            // Implement your checkout logic here
            // You can use the 'cart' array for further processing
            // For example, redirecting to a checkout page with cart details as query parameters
            const queryString = cart.map(item => `name=${encodeURIComponent(item.name)}&price=${encodeURIComponent(item.price)}`).join('&');
            const checkoutUrl = `/checkout?${queryString}`;
            window.location.href = checkoutUrl;
        });

        // Clear Cart button
        $("#clear-cart-button").click(function() {
            cart.length = 0;
            updateCartUI(); 
        });


        //increase and decrease funtion
        function updateCartUI() {
        const cartItemsList = $("#cart-items");
        const cartTotal = $("#cart-total");

        cartItemsList.empty();
        let total = 0;

        cart.forEach(item => {
            const li = `<li>${item.name} - Qty: ${item.quantity} - Rs. ${(item.price * item.quantity).toFixed(2)} <button class="increase-qty-btn" data-product-name="${item.name}">+</button> <button class="decrease-qty-btn" data-product-name="${item.name}">-</button> <button class="remove-item-btn" data-product-name="${item.name}">Remove</button></li>`;
            cartItemsList.append(li);
            total += item.price * item.quantity;
        });

        cartTotal.text(`Total: Rs. ${total.toFixed(2)}`);
    }

        // Increase product quantity in cart
        $(document).on("click", ".increase-qty-btn", function() {
        const productName = $(this).data("product-name");

        // Find the product in the cart and increase its quantity
        for (const item of cart) {
            if (item.name === productName) {
                item.quantity += 1;
                updateCartUI();
                break;
            }
        }
    });

        // Decrease product quantity in cart
        $(document).on("click", ".decrease-qty-btn", function() {
        const productName = $(this).data("product-name");

        // Find the product in the cart and decrease its quantity
        for (const item of cart) {
            if (item.name === productName) {
                if (item.quantity > 1) {
                    item.quantity -= 1;
                    updateCartUI();
                }
                break;
            }
        }
    });

        // Remove product from cart
        $(document).on("click", ".remove-item-btn", function() {
            const productName = $(this).data("product-name");

            // Find the product in the cart and remove it
            const index = cart.findIndex(item => item.name === productName);
            if (index !== -1) {
                cart.splice(index, 1);
                updateCartUI();
            }
        });

    });

</script>